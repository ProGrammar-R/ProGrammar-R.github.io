<!DOCTYPE html>
<html>
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <title>Azure Dreams PS1 De-randomizer</title>
    <link rel="stylesheet"
          href="https://unpkg.com/purecss@1.0.0/build/pure-min.css">
    <link rel="stylesheet"
          href="https://unpkg.com/purecss@1.0.0/build/grids-responsive-min.css">
    <link rel="stylesheet" href="index.css">
  </head>
  <body>
    <div id="version"></div>
    <div id="content">
      <h1>Azure Dreams PS1 De-randomizer</h1>
      <div>
        by pro_grammar
      </div>
      <form id="form" class="pure-g">
        <p id="target" class="pure-u-1">
          <span id="status"></span>
          <input id="file" type="file" accept=".bin,.iso">
        </p>
        <div class="pure-u-14-24">
          <fieldset>
            <legend>Randomizations</legend>
            <div class="pure-g">
              <div class="pure-u-12-24">
                <label for="seed">Seed:</label>
              </div>
              <div class="pure-u-12-24">
                <input id="seed" type="text" placeholder="Optional">
              </div>
              <div class="pure-u-12-24">
                <input id="preset" type="checkbox">
                <label for="preset">Preset</label>
              </div>
              <div id="preset-select" class="pure-u-12-24">
                <select id="preset-id"></select>
                <span class="tooltip-wrapper">
                  <span class="tooltip-indicator">?</span>
                  <span class="tooltip hidden">
                    <span id="preset-description"></span>
                    <span id="preset-author"></span>
                  </span>
                </span>
              </div>
              <div class="pure-u-1">
                <em>Skips</em>
              </div>
              <div class="pure-u-12-24">
                <input id="tutorial-skip" type="checkbox">
                <label for="tutorial-skip">Skip the first floor tutorial</label>
              </div>
              <div class="pure-u-12-24">
                <input id="intro-skip" type="checkbox">
                <label for="intro-skip">Skip the intro story (still receive Pita fruit)</label>
              </div>
              <div class="pure-u-1">
                <br>
                <em>Randomizations</em>
              </div>
              <div class="pure-u-12-24">
                <input id="enemizer" type="checkbox">
                <label for="enemizer">Randomize monsters (enemizer)</label>
              </div>
              <div class="pure-u-12-24">
                <input id="starting-items" type="checkbox">
                <label for="starting-items">Randomize starting items</label>
              </div>
              <div class="pure-u-1">
                <input id="barongs" type="checkbox">
                <label for="barongs">Randomize on which floors Barongs appear (all two-digit floors ending in X)</label>
              </div>
              <div id="starter-select" class="pure-u-12-24">
                <label for="starter">Starting monster</label>
                <select id="starter"></select>
              </div>
              <div id="starter-element-select" class="pure-u-12-24">
                <label for="starter-element">Monster's element</label>
                <select id="starter-element"></select>
              </div>
              <div class="pure-u-1">
                <br>
                <em>Modifications</em>
              </div>
              <div id="hidden-spells-select" class="pure-u-1">
                <label for="hidden-spells">Dormant spells awakened for</label>
                <select id="hidden-spells"></select>
              </div>
              <div class="pure-u-1">
                <input id="non-native-spells-level" type="checkbox">
                <label for="non-native-spells-level">Spells always level up regardless of monster's element</label>
              </div>
              <div class="pure-u-1">
                <input id="single-room" type="checkbox">
                <label for="single-room">All single-room floors (very challenging)</label>
              </div>
              <div class="pure-u-1" hidden="hidden">
                <input id="experimental-changes" type="checkbox">
                <label for="experimental-changes">Experimental Changes</label>
              </div>
              <div class="pure-u-1">
                <input id="clear"
                       type="submit"
                       class="pure-button hidden"
                       value="Clear">
              </div>
            </div>
          </fieldset>
          <fieldset>
            <legend>Options</legend>
            <div class="pure-g">
              <div class="pure-u-1">
                <input id="append-seed" type="checkbox">
                <label for="append-seed">Append seed to filename</label>
              </div>
            </div>
          </fieldset>
        </div>
        <div class="pure-u-10-24 spoilers">
          <textarea id="spoilers" rows="8" cols="32" disabled="disabled">
          </textarea>
        </div>
        <p class="pure-u-1">
          <input id="randomize"
                 type="submit"
                 class="pure-button pure-button-primary"
                 disabled="disabled"
                 value="Randomize">
          <input id="copy"
                 type="submit"
                 class="pure-button"
                 disabled="disabled"
                 value="Copy seed">
          <input id="makeCue"
                 type="submit"
                 class="pure-button"
                 disabled="disabled"
                 value="Create CUE">
        </p>
        <a id="download" style="display:none"></a>
        <a id="downloadCue" style="display:none"></a>
        <div id="loader"></div>
      </form>
      <div id="notification">Copied to clipboard</div>
      <hr>
      <h2><a name="help">Help</a></h2>
      <p>
        This de-randomizer targets the original NTSC-U release of
        <a href="http://redump.org/disc/2424/"><i>Azure Dreams</i> (SLUS-00614)</a>. You will need an image of your game
        disc in BIN/CUE format.
      </p>
      <p>
        If the seed name is appended to your randomized image filename after
        downloading, you will need to modify your cue file track listing to
        reference the new filename. You can also create a new cue file using the feature above, assuming the bin file uses mode 2 encoding.
      </p>
      <p>
        Do not overwrite your original BIN file; keep it somewhere safe or you may need to obtain it again from your original disc.
      </p>
      <hr>
      <h2><a name="about">About</a></h2>
      <p>
        This de-randomizer sets the each floor layout based off of the floor number, number of climbs up the tower,
        and a random seed. As such, each trip up the tower should be unique but consistent with anyone else using the same seed.
      </p>
      <p>
        Some randomization and other options are also available, but only tutorial and intro skips are enabled under the "Safe" preset.
      </p>
      <p>
        This de-randomizer is a fan project and is not affiliated with Konami/KCET, the developer and publisher of Azure Dreams.
        Please support the official release.
      </p>
      <hr>
      <h2><a name="links">Links and Acknowledgements</a></h2>
      <ul>
        <li><a href="https://sotn.io/">SotN Randomizer</a>, from which this project is derived
               (under the terms of the <a href="https://github.com/3snowp7im/SotN-Randomizer/blob/master/LICENSE">WTFPL</a> - thanks Wild Mouse)</li>
        <li><a href="https://discord.gg/fEzBz8">Azure Dreams Speedruns</a>, an AD discord server</li>
        <li><a href="https://www.mozilla.org/en-US/MPL/">Mozilla Public License 2.0</a>, the license under which this software is released</li>
      </ul>
      <hr>
      <h2><a name="bugs">Bugs</a></h2>
      <p>
        Known issues: there is a known bug with the intro skip, where re-entering your house via your front door at any point will cause the game to freeze.
        For a single race, this is fine, but I suggest disabling it for anything more than that. There also appear to be issues with sharing URLs - I suggest just passing the seed and flags separately for now.
        Both of these known issues are being worked on.
      </p>
      <p>
        Please report any other issues, especially inconsistent spawns of a given floor on the same trip up the tower using
        <a href="https://github.com/ProGrammar-R/ProGrammar-R.github.io/issues/new">GitHub issues</a>
        or the #un-randomizer channel in the <a href="https://discordapp.com/invite/m2dB3m7">Azure Dreams Speedruns</a> discord.
      </p>
      <hr>
      <h2><a name="changelog">Changelog</a></h2>
      <h3><time>July 18, 2019</time></h3>
      <ul>
        <li>v1.5.0 Tweaked UI. Added option to randomize starting items within item category (suggested by DonForgo and Sand_Knight_). All items will be identified except for the egg (for techincal reasons).
        The egg may not have an associated color, in which case it is the evolved form of a monster.
        All weapons and shields have no modifiers, are uncursed, and all balls will have 5 charges (1 for Acid Rain). Medicinal herb will always be unchanged.</li>
      </ul>
      <h3><time>July 15, 2019</time></h3>
      <ul>
        <li>v1.4.6 Fixed bug with atypical element choice.</li>
        <li>v1.4.5 Added options to choose starter's element and to awaken dormant spells on just the starting monster type.</li>
      </ul>
      <h3><time>July 14, 2019</time></h3>
      <ul>
        <li>v1.4.4 Fixed minor bug where randomizing starter element on Hikewne would also randomize the element on Dark Shoot, which caused problems with direct magic.</li>
        <li>Fixed link to discord.</li>
      </ul>
      <h3><time>July 13, 2019</time></h3>
      <ul>
        <li>v1.4.3 Fixed bug when randomizing starter element where initial spell's element would not match starter's new element (if different).</li>
        <li>v1.4.2 Added options to allow hidden spells to be available by default and random starter element (suggested by Sand_Knight_ and Baldwin).</li>
      </ul>
      <h3><time>July 9, 2019</time></h3>
      <ul>
        <li>v1.4.1 Added option to allow spells to level up even when the monster does not share the spell's native element (suggested by Baldwin).</li>
        <li>v1.4.0 Added option to choose or randomize starting monster. Kewne will still pretend to be your familiar in cutscenes.</li>
      </ul>
      <h3><time>July 2, 2019</time></h3>
      <ul>
        <li>v1.3.0 Added option to automatically skip most of the otherwise unskippable introductory cutscenes. There is still a lot of loading, but it's a much improved experience for races and practice.</li>
      </ul>
      <h3><time>June 23, 2019</time></h3>
      <ul>
        <li>v1.2.2 Changed enemizer so Nyuels and Battnels no longer spawn below floor 6.</li>
        <li>v1.2.1 Fixed bug in enemizer that prevented most enemies from spawning above level 1.</li>
        <li>v1.2.0 Added monster shuffle option (a.k.a. enemizer).</li>
      </ul>
      <h3><time>June 21, 2019</time></h3>
      <ul>
        <li>v1.1.0-beta Added support for tutorial skip (not captured in URL).</li>
        <li>Fixed link for reporting issues.</li>
      </ul>
      <h3><time>June 19, 2019</time></h3>
      <ul>
        <li>v1.0.4 Added support for all single-room floors (not captured in URL).</li>
      </ul>
      <h3><time>June 15, 2019</time></h3>
      <ul>
        <li>v1.0.3 Fixed more sources of RNG, added cue file generation, fixed front-end bugs.</li>
      </ul>
      <h3><time>June 14, 2019</time></h3>
      <ul>
        <li>v.1.0.0 First public release.</li>
      </ul>
    </div>
    <div id="dev-border"></div>
    <script src="constants.js"></script>
    <script src="items.js"></script>
    <script src="util.js"></script>
    <script src="monsters.js"></script>
    <script src="presets/safe.js"></script>
    <script src="presets/index.js"></script>
    <script src="index.js"></script>
  </body>
</html>
